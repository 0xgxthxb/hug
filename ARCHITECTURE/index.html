



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../artwork/koala.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.1">
    
    
      
        <title>Architecture - hug</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.30686662.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.a8b3c06d.css">
      
      
        
        
        <meta name="theme-color" content="#546e7a">
      
    
    
      <script src="../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="blue-grey" data-md-color-accent="green">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#the-guiding-thought-behind-the-architecture" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href=".." title="hug" class="md-header-nav__button md-logo">
          
            <img src="../artwork/koala.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              hug
            </span>
            <span class="md-header-nav__topic">
              
                Architecture
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/hugapi/hug/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    hugapi/hu
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href=".." title="hug" class="md-nav__button md-logo">
      
        <img src="../artwork/koala.png" width="48" height="48">
      
    </a>
    hug
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/hugapi/hug/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    hugapi/hu
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../ACKNOWLEDGEMENTS/" title="Acknowledgements" class="md-nav__link">
      Acknowledgements
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
    <a href="./" title="Architecture" class="md-nav__link md-nav__link--active">
      Architecture
    </a>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../CHANGELOG/" title="Changelog" class="md-nav__link">
      Changelog
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../CODING_STANDARD/" title="Coding Standard" class="md-nav__link">
      Coding Standard
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../CONTRIBUTING/" title="Contributing" class="md-nav__link">
      Contributing
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../EXTENDING/" title="Extending" class="md-nav__link">
      Extending
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../FAQ/" title="Faq" class="md-nav__link">
      Faq
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../SECURITY/" title="Security" class="md-nav__link">
      Security
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../documentation/AUTHENTICATION/" title="Authentication" class="md-nav__link">
      Authentication
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../documentation/CUSTOM_CONTEXT/" title="Custom Context" class="md-nav__link">
      Custom Context
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../documentation/DIRECTIVES/" title="Directives" class="md-nav__link">
      Directives
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../documentation/OUTPUT_FORMATS/" title="Output Formats" class="md-nav__link">
      Output Formats
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../documentation/ROUTING/" title="Routing" class="md-nav__link">
      Routing
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../documentation/TYPE_ANNOTATIONS/" title="Type Annotations" class="md-nav__link">
      Type Annotations
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-16" type="checkbox" id="nav-16">
    
    <label class="md-nav__link" for="nav-16">
      Reference
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-16">
        Reference
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-16-1" type="checkbox" id="nav-16-1">
    
    <label class="md-nav__link" for="nav-16-1">
      Hug
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-16-1">
        Hug
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../reference/hug/api/" title="API" class="md-nav__link">
      API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../reference/hug/authentication/" title="Authentication" class="md-nav__link">
      Authentication
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../reference/hug/decorators/" title="Decorators" class="md-nav__link">
      Decorators
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../reference/hug/defaults/" title="Defaults" class="md-nav__link">
      Defaults
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../reference/hug/development_runner/" title="Development Runner" class="md-nav__link">
      Development Runner
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../reference/hug/directives/" title="Directives" class="md-nav__link">
      Directives
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../reference/hug/exceptions/" title="Exceptions" class="md-nav__link">
      Exceptions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../reference/hug/format/" title="Format" class="md-nav__link">
      Format
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../reference/hug/" title="Index" class="md-nav__link">
      Index
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../reference/hug/input_format/" title="Input Format" class="md-nav__link">
      Input Format
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../reference/hug/interface/" title="Interface" class="md-nav__link">
      Interface
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../reference/hug/introspect/" title="Introspect" class="md-nav__link">
      Introspect
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../reference/hug/json_module/" title="Json Module" class="md-nav__link">
      Json Module
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../reference/hug/middleware/" title="Middleware" class="md-nav__link">
      Middleware
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../reference/hug/output_format/" title="Output Format" class="md-nav__link">
      Output Format
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../reference/hug/redirect/" title="Redirect" class="md-nav__link">
      Redirect
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../reference/hug/route/" title="Route" class="md-nav__link">
      Route
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../reference/hug/routing/" title="Routing" class="md-nav__link">
      Routing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../reference/hug/store/" title="Store" class="md-nav__link">
      Store
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../reference/hug/test/" title="Test" class="md-nav__link">
      Test
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../reference/hug/this/" title="This" class="md-nav__link">
      This
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../reference/hug/transform/" title="Transform" class="md-nav__link">
      Transform
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../reference/hug/types/" title="Types" class="md-nav__link">
      Types
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../reference/hug/use/" title="Use" class="md-nav__link">
      Use
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../reference/hug/validate/" title="Validate" class="md-nav__link">
      Validate
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/hugapi/hug/edit/master/docs/ARCHITECTURE.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="the-guiding-thought-behind-the-architecture">The guiding thought behind the architecture</h1>
<p>hug is the cleanest way to create HTTP REST APIs on Python 3.
It consistently benchmarks among the top 3 performing web frameworks for Python, handily beating out Flask and Django.
For almost every common Web API task the code written to accomplish it in hug is a small fraction of what is required in other Frameworks.</p>
<p>However, it's important to note, hug is not a Web API Framework. OK--that certainly is a function it performs. And exceptionally well at that.
But at its core, hug is a framework for exposing idiomatically correct and standard internal Python APIs externally.
A framework to allow developers and architects to define logic and structure once, and then cleanly expose it over other means.</p>
<p>Currently, this means that you can expose existing Python functions / APIs over HTTP and CLI in addition to standard Python.
However, as time goes on more interfaces will be supported. The architecture and implementation decisions that have gone
into hug have and will continue to support this goal.</p>
<p>This central concept also frees hug to rely on the fastest and best of breed components for every interface it supports:</p>
<ul>
<li><a href="https://github.com/falconry/falcon">Falcon</a> is leveraged when exposing to HTTP for its impressive performance at this task</li>
<li><a href="https://docs.python.org/3/library/argparse.html">Argparse</a> is leveraged when exposing to CLI for the clean consistent interaction it enables from the command line</li>
</ul>
<h1 id="what-this-looks-like-in-practice-an-illustrative-example">What this looks like in practice - an illustrative example</h1>
<p>Let's say I have a very simple Python API I've built to add 2 numbers together. I call my invention <code>addition</code>.
Trust me, this is legit. It's trademarked and everything:</p>
<div class="codehilite"><pre><span></span><span class="sd">&quot;&quot;&quot;A simple API to enable adding two numbers together&quot;&quot;&quot;</span>


<span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">number_1</span><span class="p">,</span> <span class="n">number_2</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Returns the result of adding number_1 to number_2&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">number_1</span> <span class="o">+</span> <span class="n">number_2</span>
</pre></div>


<p>It works, it's well documented, and it's clean.
Several people are already importing and using my Python module for their math needs.
However, there's a great injustice! I'm lazy, and I don't want to open a Python interpreter etc to access my function.
Here's how I modify it to expose it via the command line:</p>
<div class="codehilite"><pre><span></span><span class="sd">&quot;&quot;&quot;A simple API to enable adding two numbers together&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">hug</span>


<span class="nd">@hug.cli</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">number_1</span><span class="p">:</span> <span class="n">hug</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">number</span><span class="p">,</span> <span class="n">number_2</span><span class="p">:</span> <span class="n">hug</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">number</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Returns the result of adding number_1 to number_2&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">number_1</span> <span class="o">+</span> <span class="n">number_2</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">add</span><span class="o">.</span><span class="n">interface</span><span class="o">.</span><span class="n">cli</span><span class="p">()</span>
</pre></div>


<p>Yay! Now I can just do my math from the command line using:
<code>add.py $NUMBER_1 $NUMBER_2</code>.
And even better, if I miss an argument it lets me know what it is and how to fix my error.
The thing I immediately notice, is that my new command line interface works, it's well documented, and it's clean.
Just like the original.</p>
<p>However, users are not satisfied. I keep updating my API and they don't want to have to install a new copy every time.
They demand a Web API so they can always be pointing to my latest and greatest without restarting their apps and APIs.
No problem. I'll just expose it over HTTP as well:</p>
<div class="codehilite"><pre><span></span><span class="sd">&quot;&quot;&quot;A simple API to enable adding two numbers together&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">hug</span>


<span class="nd">@hug.get</span><span class="p">()</span> <span class="c1"># &lt;-- This is the only additional line</span>
<span class="nd">@hug.cli</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">number_1</span><span class="p">:</span> <span class="n">hug</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">number</span><span class="p">,</span> <span class="n">number_2</span><span class="p">:</span> <span class="n">hug</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">number</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Returns the result of adding number_1 to number_2&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">number_1</span> <span class="o">+</span> <span class="n">number_2</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">add</span><span class="o">.</span><span class="n">interface</span><span class="o">.</span><span class="n">cli</span><span class="p">()</span>
</pre></div>


<p>That's it. I then run my new service via <code>hug -f add.py</code> and can see it running on <code>http://localhost:8000/</code>.
The default page shows me documentation that points me toward <code>http://localhost:8000/add?number_1=1&amp;number_2=2</code> to perform my first addition.
The thing I immediately notice, is that my new web interface works, it's well documented, and it's clean.
Just like the original. Even better, after all of this, people hitting the API via Python didn't have to change anything.
All my original unit tests continue to pass and my code coverage remains at 100%.</p>
<p>It turns out, the problems and thoughts that go into defining a clean well documented API for internal use greatly mirror those that are required to expose an API for external use. hug recognizes this and enables cleanly reusing the documentation, requirements, and structure of internal APIs for external use. This also encourages easier to use and well documented internal APIs: a major win/win.</p>
<h1 id="what-happened-internally-as-i-exposed-my-api-to-new-interfaces">What happened internally as I exposed my API to new interfaces?</h1>
<p>A few things happen when you wrapped that first function for external use, with hug.cli():</p>
<ul>
<li>hug created a singleton hug.API object on your module to keep track of all interfaces that exist within the module<ul>
<li>This is referable by <code>__hug__</code> or <code>hug.API(__name__)</code></li>
</ul>
</li>
<li>a new <code>hug.interface.CLI()</code> object was created and attached to <code>add.interface.cli</code><ul>
<li>This interface fully encapsulates the logic needed to expose <code>add</code> as a command line tool</li>
<li>NOTE: all supported ways to expose a function via hug can be found in <code>hug/interface.py</code></li>
</ul>
</li>
<li>the original Python <code>add</code> function is returned unmodified (with exception to the <code>.interface.cli</code> property addition)</li>
</ul>
<p>Then when I extended my API to run as HTTP service the same basic pattern was followed:</p>
<ul>
<li>hug saw that the singleton already existed</li>
<li>a new <code>hug.interface.HTTP()</code> object was created and attached to <code>add.interface.http</code><ul>
<li>This interface encapsulates the logic needed to expose the <code>add</code> command as an HTTP service</li>
<li>The new HTTP interface handler is registered to the API singleton</li>
</ul>
</li>
<li>the original Python <code>add</code> function is returned unmodified (with exception to the <code>.interface.http</code> property addition)</li>
</ul>
<p>At the end of this, I have 2 interface objects attached to my original function: <code>add.cli</code> and <code>add.http</code>.
Which is consistent with what I want to accomplish, one Python API with 2 additional external interfaces.</p>
<p>When I start the service via the command line, I call the <code>add.cli</code> interface directly which executes the code
producing a command line tool to interact with the add function.</p>
<p>When I run <code>hug -f add.py</code> the hug runner looks for the
<code>__hug__</code> singleton object and then looks for all registered HTTP interfaces, creating a Falcon WSGI API from them.
It then uses this new Falcon API to directly handle incoming HTTP requests.</p>
<h1 id="where-does-the-code-live-for-these-core-pieces">Where does the code live for these core pieces?</h1>
<p>While hug has a lot of modules that enable it to provide a great depth of functionality, everything accomplished above,
and that is core to hug, lives in only a few:</p>
<ul>
<li><code>hug/api.py</code>: Defines the hug per-module singleton object that keeps track of all registered interfaces, alongside the associated per interface APIs (HTTPInterfaceAPI, CLIInterfaceAPI)</li>
<li><code>hug/routing.py</code>: holds all the data and settings that should be passed to newly created interfaces, and creates the interfaces from that data.<ul>
<li>This directly is what powers <code>hug.get</code>, <code>hug.cli</code>, and all other function to interface routers</li>
<li>Can be seen as a Factory for creating new interfaces</li>
</ul>
</li>
<li><code>hug/interface.py</code>: Defines the actual interfaces that manage external interaction with your function (CLI and HTTP).</li>
</ul>
<p>These 3 modules define the core functionality of hug, and any API that uses hug will inevitably utilize these modules.
Develop a good handling on just these and you'll be in great shape to contribute to hug, and think of new ways to improve the Framework.</p>
<p>Beyond these there is one additional internal utility library that enables hug to do its magic: <code>hug/introspect.py</code>.
This module provides utility functions that enable hugs routers to determine what arguments a function takes and in what form.</p>
<h1 id="enabling-interfaces-to-improve-upon-internal-functions">Enabling interfaces to improve upon internal functions</h1>
<p>hug provides several mechanisms to enable your exposed interfaces to have additional capabilities not defined by
the base Python function.</p>
<h2 id="enforced-type-annotations">Enforced type annotations</h2>
<p>hug interfaces automatically enforce the type annotations that you set on functions</p>
<div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">number_1</span><span class="p">:</span><span class="n">hug</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">number</span><span class="p">,</span> <span class="n">number_2</span><span class="p">:</span><span class="n">hug</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">number</span><span class="p">):</span>
</pre></div>


<ul>
<li>These types are simply called with the data which is passed into that field, if an exception is raised then it's seen as invalid.</li>
<li>All of hug's custom types used for enforcing annotations are defined in <code>hug/types.py</code>.</li>
</ul>
<h2 id="directives">Directives</h2>
<p>hug interfaces allow replacing Python function parameters with dynamically-pulled data via directives.</p>
<div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">number_1</span><span class="p">:</span><span class="n">hug</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">number</span><span class="p">,</span> <span class="n">number_2</span><span class="p">:</span><span class="n">hug</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">number</span><span class="p">,</span> <span class="n">hug_timer</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>
</pre></div>


<ul>
<li>In this example <code>hug_timer</code> is a directive, when calling via a hug interface <code>hug_timer</code> is replaced with a timer that contains the starting time.</li>
<li>All of hug's built-in directives are defined in <code>hug/directives.py</code>.</li>
</ul>
<h2 id="requires">Requires</h2>
<p>hug requirements allow you to specify requirements that must be met only for specified interfaces.</p>
<div class="codehilite"><pre><span></span><span class="nd">@hug.get</span><span class="p">(</span><span class="n">requires</span><span class="o">=</span><span class="n">hug</span><span class="o">.</span><span class="n">authentication</span><span class="o">.</span><span class="n">basic</span><span class="p">(</span><span class="n">hug</span><span class="o">.</span><span class="n">authentication</span><span class="o">.</span><span class="n">verify</span><span class="p">(</span><span class="s1">&#39;User1&#39;</span><span class="p">,</span> <span class="s1">&#39;mypassword&#39;</span><span class="p">)))</span>
</pre></div>


<ul>
<li>Causes the HTTP method to only successfully call the Python function if User1 is logged in.</li>
<li>require functions currently highly focused on authentication and all existing require functions are defined in <code>hug/authentication.py</code>.</li>
</ul>
<h2 id="transformations">Transformations</h2>
<p>hug transformations enable changing the result of a function but only for the specified interface.</p>
<div class="codehilite"><pre><span></span><span class="nd">@hug.get</span><span class="p">(</span><span class="n">transform</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
</pre></div>


<ul>
<li>The above would cause the method to return a stringed result, while the original Python function would still return an int.</li>
<li>All of hug's built in transformations are defined in <code>hug/transform.py</code>.</li>
</ul>
<h2 id="inputoutput-formats">Input/Output formats</h2>
<p>hug provides an extensive number of built-in input and output formats.</p>
<p><code>python
 @hug.get(output_format=hug.output_format.json)</code></p>
<ul>
<li>These formats define how data should be sent to your API function and how it will be returned.</li>
<li>All of hugs built-in output formats are found in <code>hug/output_format.py</code>.</li>
<li>All of hugs built-in input formats are found in <code>hug/input_format.py</code>.</li>
<li>The default <code>output_formatting</code> is JSON.</li>
</ul>
<h1 id="switching-from-using-a-hug-api-over-one-interface-to-another">Switching from using a hug API over one interface to another</h1>
<p>hug does its best to also solve the other side of the coin: that is how APIs are used.
While native Python will always be the fastest, HTTP can provide attractive auto updating
and clear responsibility separation benefits. You can interact with hug APIs via hug.use.[interface] if the ability
to switch between these is a high priority for you. The code that enables this is found in <code>hug/use.py</code> and should be
kept in mind if working on adding an additional interface for hug, or changing how hug calls functions.</p>
<h1 id="feel-free-to-update-or-request-more-info">Feel free to update or request more info :)</h1>
<p>I tried my best to highlight where important functionality in the hug project lives via this Architecture document, as well as
explain the reasoning behind it. However, this document is certainly not complete! If you encounter anything you would like to be
expanded upon or explained in detail here, please either let me know or modify the document so everyone can get a good walkthrough of hug's architecture.</p>
<p>Thanks!</p>
<p>I hope you have found this guide useful :)</p>
<p>~Timothy</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../ACKNOWLEDGEMENTS/" title="Acknowledgements" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Acknowledgements
              </span>
            </div>
          </a>
        
        
          <a href="../CHANGELOG/" title="Changelog" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Changelog
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Powered by
        <a href="http://timothycrosley.github.io/portray">portray.</a>
        You too can
        <a href="http://timothycrosley.github.io/portray">
          portray</a>
        your Python project well using automatic documentation.
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.c648116f.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
    
  </body>
</html>