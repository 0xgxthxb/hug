



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../artwork/koala.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.1">
    
    
      
        <title>Output Formats - hug</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.30686662.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.a8b3c06d.css">
      
      
        
        
        <meta name="theme-color" content="#546e7a">
      
    
    
      <script src="../../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="blue-grey" data-md-color-accent="green">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#hug-output-formats" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="hug" class="md-header-nav__button md-logo">
          
            <img src="../../artwork/koala.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              hug
            </span>
            <span class="md-header-nav__topic">
              
                Output Formats
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/hugapi/hug/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    hugapi/hu
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../.." title="hug" class="md-nav__button md-logo">
      
        <img src="../../artwork/koala.png" width="48" height="48">
      
    </a>
    hug
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/hugapi/hug/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    hugapi/hu
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../ACKNOWLEDGEMENTS/" title="Acknowledgements" class="md-nav__link">
      Acknowledgements
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../ARCHITECTURE/" title="Architecture" class="md-nav__link">
      Architecture
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../CHANGELOG/" title="Changelog" class="md-nav__link">
      Changelog
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../CODING_STANDARD/" title="Coding Standard" class="md-nav__link">
      Coding Standard
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../CONTRIBUTING/" title="Contributing" class="md-nav__link">
      Contributing
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../EXTENDING/" title="Extending" class="md-nav__link">
      Extending
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../FAQ/" title="Faq" class="md-nav__link">
      Faq
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../SECURITY/" title="Security" class="md-nav__link">
      Security
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../AUTHENTICATION/" title="Authentication" class="md-nav__link">
      Authentication
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../CUSTOM_CONTEXT/" title="Custom Context" class="md-nav__link">
      Custom Context
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../DIRECTIVES/" title="Directives" class="md-nav__link">
      Directives
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
    <a href="./" title="Output Formats" class="md-nav__link md-nav__link--active">
      Output Formats
    </a>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../ROUTING/" title="Routing" class="md-nav__link">
      Routing
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../TYPE_ANNOTATIONS/" title="Type Annotations" class="md-nav__link">
      Type Annotations
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-16" type="checkbox" id="nav-16">
    
    <label class="md-nav__link" for="nav-16">
      Reference
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-16">
        Reference
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-16-1" type="checkbox" id="nav-16-1">
    
    <label class="md-nav__link" for="nav-16-1">
      Hug
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-16-1">
        Hug
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/hug/api/" title="API" class="md-nav__link">
      API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/hug/authentication/" title="Authentication" class="md-nav__link">
      Authentication
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/hug/decorators/" title="Decorators" class="md-nav__link">
      Decorators
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/hug/defaults/" title="Defaults" class="md-nav__link">
      Defaults
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/hug/development_runner/" title="Development Runner" class="md-nav__link">
      Development Runner
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/hug/directives/" title="Directives" class="md-nav__link">
      Directives
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/hug/exceptions/" title="Exceptions" class="md-nav__link">
      Exceptions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/hug/format/" title="Format" class="md-nav__link">
      Format
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/hug/" title="Index" class="md-nav__link">
      Index
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/hug/input_format/" title="Input Format" class="md-nav__link">
      Input Format
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/hug/interface/" title="Interface" class="md-nav__link">
      Interface
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/hug/introspect/" title="Introspect" class="md-nav__link">
      Introspect
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/hug/json_module/" title="Json Module" class="md-nav__link">
      Json Module
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/hug/middleware/" title="Middleware" class="md-nav__link">
      Middleware
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/hug/output_format/" title="Output Format" class="md-nav__link">
      Output Format
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/hug/redirect/" title="Redirect" class="md-nav__link">
      Redirect
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/hug/route/" title="Route" class="md-nav__link">
      Route
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/hug/routing/" title="Routing" class="md-nav__link">
      Routing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/hug/store/" title="Store" class="md-nav__link">
      Store
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/hug/test/" title="Test" class="md-nav__link">
      Test
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/hug/this/" title="This" class="md-nav__link">
      This
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/hug/transform/" title="Transform" class="md-nav__link">
      Transform
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/hug/types/" title="Types" class="md-nav__link">
      Types
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/hug/use/" title="Use" class="md-nav__link">
      Use
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/hug/validate/" title="Validate" class="md-nav__link">
      Validate
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/hugapi/hug/edit/master/docs/documentation/OUTPUT_FORMATS.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="hug-output-formats">hug output formats</h1>
<p>Every endpoint that is exposed through an externally facing interface will need to return data in a standard, easily understandable format.</p>
<p>The default output format for all hug APIs is JSON. However, you may explicitly specify a different default output_format for a particular API:</p>
<div class="codehilite"><pre><span></span><span class="n">hug</span><span class="p">.</span><span class="n">API</span><span class="p">(</span><span class="n">__name__</span><span class="p">).</span><span class="n">http</span><span class="p">.</span><span class="n">output_format</span> <span class="o">=</span> <span class="n">hug</span><span class="p">.</span><span class="n">output_format</span><span class="p">.</span><span class="n">html</span>
</pre></div>


<p>or:</p>
<div class="codehilite"><pre><span></span><span class="nv">@hug</span><span class="p">.</span><span class="n">default_output_format</span><span class="p">()</span><span class="w"></span>
<span class="n">def</span><span class="w"> </span><span class="n">my_output_formatter</span><span class="p">(</span><span class="k">data</span><span class="p">,</span><span class="w"> </span><span class="n">request</span><span class="p">,</span><span class="w"> </span><span class="n">response</span><span class="p">)</span><span class="err">:</span><span class="w"></span>
<span class="w">    </span><span class="err">#</span><span class="w"> </span><span class="n">Custom</span><span class="w"> </span><span class="k">output</span><span class="w"> </span><span class="n">formatting</span><span class="w"> </span><span class="n">code</span><span class="w"></span>
</pre></div>


<p>By default, this only applies to the output format of HTTP responses.
To change the output format of the command line interface:</p>
<div class="codehilite"><pre><span></span><span class="nv">@hug</span><span class="p">.</span><span class="n">default_output_format</span><span class="p">(</span><span class="n">cli</span><span class="o">=</span><span class="k">True</span><span class="p">,</span><span class="w"> </span><span class="n">http</span><span class="o">=</span><span class="k">False</span><span class="p">)</span><span class="w"></span>
<span class="n">def</span><span class="w"> </span><span class="n">my_output_formatter</span><span class="p">(</span><span class="k">data</span><span class="p">,</span><span class="w"> </span><span class="n">request</span><span class="p">,</span><span class="w"> </span><span class="n">response</span><span class="p">)</span><span class="err">:</span><span class="w"></span>
<span class="w">    </span><span class="err">#</span><span class="w"> </span><span class="n">Custom</span><span class="w"> </span><span class="k">output</span><span class="w"> </span><span class="n">formatting</span><span class="w"> </span><span class="n">code</span><span class="w"></span>
</pre></div>


<p>To specify an output_format for a specific endpoint, simply specify the output format within its router:</p>
<div class="codehilite"><pre><span></span>@<span class="nv">hug</span>.<span class="nv">get</span><span class="ss">(</span><span class="nv">output</span><span class="o">=</span><span class="nv">hug</span>.<span class="nv">output_format</span>.<span class="nv">html</span><span class="ss">)</span>
<span class="nv">def</span> <span class="nv">my_endpoint</span><span class="ss">()</span>:
    <span class="k">return</span> # <span class="nv">HTML</span> <span class="nv">generating</span> <span class="nv">code</span> <span class="nv">goes</span> <span class="nv">here</span>
</pre></div>


<p>You can use route chaining to specify an output format for a group of endpoints within an API:</p>
<div class="codehilite"><pre><span></span><span class="nv">html</span> <span class="o">=</span> <span class="nv">hug</span>.<span class="nv">get</span><span class="ss">(</span><span class="nv">output</span><span class="o">=</span><span class="nv">hug</span>.<span class="nv">output_format</span>.<span class="nv">html</span><span class="ss">)</span>

@<span class="nv">html</span>
<span class="nv">def</span> <span class="nv">my_endpoint_1</span><span class="ss">()</span>:
    <span class="k">return</span> # <span class="nv">HTML</span> <span class="nv">generating</span> <span class="nv">code</span> <span class="nv">goes</span> <span class="nv">here</span>

@<span class="nv">html</span>.<span class="nv">urls</span><span class="ss">(</span><span class="s1">&#39;</span><span class="s">/</span><span class="s1">&#39;</span><span class="ss">)</span>
<span class="nv">def</span> <span class="nv">root</span><span class="ss">()</span>:
    <span class="k">return</span> # <span class="nv">HTML</span> <span class="nv">generating</span> <span class="nv">code</span> <span class="nv">goes</span> <span class="nv">here</span>
</pre></div>


<p>Finally, an output format may be a collection of different output formats that get used conditionally. For example, using the built-in suffix output format:</p>
<div class="codehilite"><pre><span></span><span class="nv">suffix_output</span> <span class="o">=</span> <span class="nv">hug</span>.<span class="nv">output_format</span>.<span class="nv">suffix</span><span class="ss">(</span>{<span class="s1">&#39;</span><span class="s">.js</span><span class="s1">&#39;</span>: <span class="nv">hug</span>.<span class="nv">output_format</span>.<span class="nv">json</span>,
                                          <span class="s1">&#39;</span><span class="s">.html</span><span class="s1">&#39;</span>: <span class="nv">hug</span>.<span class="nv">output_format</span>.<span class="nv">html</span>}<span class="ss">)</span>

@<span class="nv">hug</span>.<span class="nv">get</span><span class="ss">((</span><span class="s1">&#39;</span><span class="s">my_endpoint.js</span><span class="s1">&#39;</span>, <span class="s1">&#39;</span><span class="s">my_endoint.html</span><span class="s1">&#39;</span><span class="ss">)</span>, <span class="nv">output</span><span class="o">=</span><span class="nv">suffix_output</span><span class="ss">)</span>
<span class="nv">def</span> <span class="nv">my_endpoint</span><span class="ss">()</span>:
    <span class="k">return</span> <span class="s1">&#39;&#39;</span>
</pre></div>


<p>In this case, if the endpoint is accessed via my_endpoint.js, the output type will be JSON; however if it's accessed via my_endoint.html, the output type will be HTML.</p>
<p>You can also change the default output format globally for all APIs with either:</p>
<div class="codehilite"><pre><span></span><span class="nv">@hug</span><span class="p">.</span><span class="n">default_output_format</span><span class="p">(</span><span class="n">apply_globally</span><span class="o">=</span><span class="k">True</span><span class="p">,</span><span class="w"> </span><span class="n">cli</span><span class="o">=</span><span class="k">True</span><span class="p">,</span><span class="w"> </span><span class="n">http</span><span class="o">=</span><span class="k">True</span><span class="p">)</span><span class="w"></span>
<span class="n">def</span><span class="w"> </span><span class="n">my_output_formatter</span><span class="p">(</span><span class="k">data</span><span class="p">,</span><span class="w"> </span><span class="n">request</span><span class="p">,</span><span class="w"> </span><span class="n">response</span><span class="p">)</span><span class="err">:</span><span class="w"></span>
<span class="w">    </span><span class="err">#</span><span class="w"> </span><span class="n">Custom</span><span class="w"> </span><span class="k">output</span><span class="w"> </span><span class="n">formatting</span><span class="w"> </span><span class="n">code</span><span class="w"></span>
</pre></div>


<p>or:</p>
<div class="codehilite"><pre><span></span><span class="nv">hug</span>.<span class="nv">defaults</span>.<span class="nv">output_format</span> <span class="o">=</span> <span class="nv">hug</span>.<span class="nv">output_format</span>.<span class="nv">html</span>      # <span class="k">for</span> <span class="nv">HTTP</span>
<span class="nv">hug</span>.<span class="nv">defaults</span>.<span class="nv">cli_output_format</span> <span class="o">=</span> <span class="nv">hug</span>.<span class="nv">output_format</span>.<span class="nv">html</span>  # <span class="k">for</span> <span class="nv">the</span> <span class="nv">CLI</span>
</pre></div>


<p>Note that when extending APIs, changing the default output format globally must be done before importing the modules of any of the sub-APIs:</p>
<div class="codehilite"><pre><span></span><span class="n">hug</span><span class="o">.</span><span class="n">defaults</span><span class="o">.</span><span class="n">cli_output_format</span> <span class="o">=</span> <span class="n">hug</span><span class="o">.</span><span class="n">output_format</span><span class="o">.</span><span class="n">html</span>

<span class="kn">from</span> <span class="nn">my_app</span> <span class="kn">import</span> <span class="n">my_sub_api</span>

<span class="nd">@hug.extend_api</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">extended</span><span class="p">():</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">my_sub_api</span><span class="p">]</span>
</pre></div>


<h1 id="built-in-hug-output-formats">Built-in hug output formats</h1>
<p>hug provides a large catalog of built-in output formats, which can be used to build useful APIs right away:</p>
<ul>
<li><code>hug.output_format.json</code>: The default hug output formatter for all endpoints; outputs in Javascript Serialized Object Notation (JSON).</li>
<li><code>hug.output_format.text</code>: Outputs in a plain text format.</li>
<li><code>hug.output_format.html</code>: Outputs Hyper Text Markup Language (HTML).</li>
<li><code>hug.output_format.json_camelcase</code>: Outputs in the JSON format, but first converts all keys to camelCase to better conform to Javascript coding standards.</li>
<li><code>hug.output_format.pretty_json</code>: Outputs in the JSON format, with extra whitespace to improve human readability.</li>
<li>
<p><code>hug.output_format.image(format)</code>: Outputs an image (of the specified format).</p>
<ul>
<li>There are convenience calls in the form `hug.output_format.{FORMAT}_image for the following image types: 'png', 'jpg', 'bmp', 'eps', 'gif', 'im', 'jpeg', 'msp', 'pcx', 'ppm', 'spider', 'tiff', 'webp', 'xbm',
           'cur', 'dcx', 'fli', 'flc', 'gbr', 'gd', 'ico', 'icns', 'imt', 'iptc', 'naa', 'mcidas', 'mpo', 'pcd',
           'psd', 'sgi', 'tga', 'wal', 'xpm', and 'svg'.
Automatically works on returned file names, streams, or objects that produce an image on read, save, or render.</li>
</ul>
</li>
<li>
<p><code>hug.output_format.video(video_type, video_mime, doc)</code>: Streams a video back to the user in the specified format.</p>
<ul>
<li>There are convenience calls in the form `hug.output_format.{FORMAT}_video for the following video types: 'flv', 'mp4', 'm3u8', 'ts', '3gp', 'mov', 'avi', and 'wmv'.
Automatically works on returned file names, streams, or objects that produce a video on read, save, or render.</li>
</ul>
</li>
<li>
<p><code>hug.output_format.file</code>: Will dynamically determine and stream a file based on its content. Automatically works on returned file names and streams.</p>
</li>
<li>
<p><code>hug.output_format.on_content_type(handlers={content_type: output_format}, default=None)</code>: Dynamically changes the output format based on the request content type.</p>
</li>
<li><code>hug.output_format.suffix(handlers={suffix: output_format}, default=None)</code>: Dynamically changes the output format based on a suffix at the end of the requested path.</li>
<li><code>hug.output_format.prefix(handlers={suffix: output_format}, default=None)</code>: Dynamically changes the output format based on a prefix at the beginning of the requested path.</li>
</ul>
<h1 id="creating-a-custom-output-format">Creating a custom output format</h1>
<p>An output format is simply a function with a content type attached that takes a data argument, and optionally a request and response, and returns properly encoded and formatted data:</p>
<div class="codehilite"><pre><span></span>@<span class="nv">hug</span>.<span class="nv">format</span>.<span class="nv">content_type</span><span class="ss">(</span><span class="s1">&#39;</span><span class="s">file/text</span><span class="s1">&#39;</span><span class="ss">)</span>
<span class="nv">def</span> <span class="nv">format_as_text</span><span class="ss">(</span><span class="nv">data</span>, <span class="nv">request</span><span class="o">=</span><span class="nv">None</span>, <span class="nv">response</span><span class="o">=</span><span class="nv">None</span><span class="ss">)</span>:
    <span class="k">return</span> <span class="nv">str</span><span class="ss">(</span><span class="nv">data</span><span class="ss">)</span>.<span class="nv">encode</span><span class="ss">(</span><span class="s1">&#39;</span><span class="s">utf8</span><span class="s1">&#39;</span><span class="ss">)</span>
</pre></div>


<p>A common pattern is to only apply the output format. Validation errors aren't passed in, since it's hard to deal with this for several formats (such as images), and it may make more sense to simply return the error as JSON. hug makes this pattern simple, as well, with the <code>hug.output_format.on_valid</code> decorator:</p>
<div class="codehilite"><pre><span></span>@<span class="nv">hug</span>.<span class="nv">output_format</span>.<span class="nv">on_valid</span><span class="ss">(</span><span class="s1">&#39;</span><span class="s">file/text</span><span class="s1">&#39;</span><span class="ss">)</span>
<span class="nv">def</span> <span class="nv">format_as_text_when_valid</span><span class="ss">(</span><span class="nv">data</span>, <span class="nv">request</span><span class="o">=</span><span class="nv">None</span>, <span class="nv">response</span><span class="o">=</span><span class="nv">None</span><span class="ss">)</span>:
    <span class="k">return</span> <span class="nv">str</span><span class="ss">(</span><span class="nv">data</span><span class="ss">)</span>.<span class="nv">encode</span><span class="ss">(</span><span class="s1">&#39;</span><span class="s">utf8</span><span class="s1">&#39;</span><span class="ss">)</span>
</pre></div>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../DIRECTIVES/" title="Directives" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Directives
              </span>
            </div>
          </a>
        
        
          <a href="../ROUTING/" title="Routing" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Routing
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Powered by
        <a href="http://timothycrosley.github.io/portray">portray.</a>
        You too can
        <a href="http://timothycrosley.github.io/portray">
          portray</a>
        your Python project well using automatic documentation.
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.c648116f.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
    
  </body>
</html>