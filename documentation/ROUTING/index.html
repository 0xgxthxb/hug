



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../artwork/koala.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.1">
    
    
      
        <title>Routing - hug</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.30686662.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.a8b3c06d.css">
      
      
        
        
        <meta name="theme-color" content="#546e7a">
      
    
    
      <script src="../../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="blue-grey" data-md-color-accent="green">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#routing-in-hug" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="hug" class="md-header-nav__button md-logo">
          
            <img src="../../artwork/koala.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              hug
            </span>
            <span class="md-header-nav__topic">
              
                Routing
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/hugapi/hug/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    hugapi/hu
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../.." title="hug" class="md-nav__button md-logo">
      
        <img src="../../artwork/koala.png" width="48" height="48">
      
    </a>
    hug
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/hugapi/hug/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    hugapi/hu
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../ACKNOWLEDGEMENTS/" title="Acknowledgements" class="md-nav__link">
      Acknowledgements
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../ARCHITECTURE/" title="Architecture" class="md-nav__link">
      Architecture
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../CHANGELOG/" title="Changelog" class="md-nav__link">
      Changelog
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../CODING_STANDARD/" title="Coding Standard" class="md-nav__link">
      Coding Standard
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../CONTRIBUTING/" title="Contributing" class="md-nav__link">
      Contributing
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../EXTENDING/" title="Extending" class="md-nav__link">
      Extending
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../FAQ/" title="Faq" class="md-nav__link">
      Faq
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../SECURITY/" title="Security" class="md-nav__link">
      Security
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../AUTHENTICATION/" title="Authentication" class="md-nav__link">
      Authentication
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../CUSTOM_CONTEXT/" title="Custom Context" class="md-nav__link">
      Custom Context
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../DIRECTIVES/" title="Directives" class="md-nav__link">
      Directives
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../OUTPUT_FORMATS/" title="Output Formats" class="md-nav__link">
      Output Formats
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
    <a href="./" title="Routing" class="md-nav__link md-nav__link--active">
      Routing
    </a>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../TYPE_ANNOTATIONS/" title="Type Annotations" class="md-nav__link">
      Type Annotations
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-16" type="checkbox" id="nav-16">
    
    <label class="md-nav__link" for="nav-16">
      Reference
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-16">
        Reference
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-16-1" type="checkbox" id="nav-16-1">
    
    <label class="md-nav__link" for="nav-16-1">
      Hug
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-16-1">
        Hug
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/hug/api/" title="API" class="md-nav__link">
      API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/hug/authentication/" title="Authentication" class="md-nav__link">
      Authentication
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/hug/decorators/" title="Decorators" class="md-nav__link">
      Decorators
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/hug/defaults/" title="Defaults" class="md-nav__link">
      Defaults
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/hug/development_runner/" title="Development Runner" class="md-nav__link">
      Development Runner
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/hug/directives/" title="Directives" class="md-nav__link">
      Directives
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/hug/exceptions/" title="Exceptions" class="md-nav__link">
      Exceptions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/hug/format/" title="Format" class="md-nav__link">
      Format
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/hug/" title="Index" class="md-nav__link">
      Index
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/hug/input_format/" title="Input Format" class="md-nav__link">
      Input Format
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/hug/interface/" title="Interface" class="md-nav__link">
      Interface
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/hug/introspect/" title="Introspect" class="md-nav__link">
      Introspect
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/hug/json_module/" title="Json Module" class="md-nav__link">
      Json Module
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/hug/middleware/" title="Middleware" class="md-nav__link">
      Middleware
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/hug/output_format/" title="Output Format" class="md-nav__link">
      Output Format
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/hug/redirect/" title="Redirect" class="md-nav__link">
      Redirect
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/hug/route/" title="Route" class="md-nav__link">
      Route
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/hug/routing/" title="Routing" class="md-nav__link">
      Routing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/hug/store/" title="Store" class="md-nav__link">
      Store
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/hug/test/" title="Test" class="md-nav__link">
      Test
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/hug/this/" title="This" class="md-nav__link">
      This
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/hug/transform/" title="Transform" class="md-nav__link">
      Transform
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/hug/types/" title="Types" class="md-nav__link">
      Types
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/hug/use/" title="Use" class="md-nav__link">
      Use
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/hug/validate/" title="Validate" class="md-nav__link">
      Validate
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/hugapi/hug/edit/master/docs/documentation/ROUTING.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="routing-in-hug">Routing in hug</h1>
<p>The most basic function of any framework meant to enable external interaction with an API, is routing how the external
interaction will correspond to internal function calls and business logic. hug provides flexible and powerful routers
that aim to scale intuitively from simple use-cases to complex.</p>
<p>To enable this all hug routers share 3 attributes:</p>
<ul>
<li>Can be used directly as function decorators</li>
<li>Can be used separately from the function</li>
<li>Can be stored, modified, and chained before being used</li>
</ul>
<p>And, while hug uses functions in most of its examples, it supports applying routes to methods and objects as well. All hug routers enforce type annotation
and enable automatic argument supplying via directives.</p>
<h1 id="using-a-router-as-a-decorator">Using a router as a decorator</h1>
<p>The most basic use case is to simply define the route directly above the function you need to expose as a decorator:</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">hug</span>


<span class="nd">@hug.get</span><span class="p">(</span><span class="s1">&#39;/home&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">root</span><span class="p">():</span>
    <span class="k">return</span> <span class="s1">&#39;Welcome home!&#39;</span>
</pre></div>


<p>This is clear, explicit, and obvious. As such, this is recommended for most basic APIs.</p>
<h1 id="declaring-a-router-separate-from-a-function">Declaring a router separate from a function</h1>
<p>Sometimes, in more complex use-cases, it's necessary to define routing separate from where the code itself is defined.
hug aims to make this as easy and intuitive as it can be:</p>
<p>Internal API:</p>
<div class="codehilite"><pre><span></span># <span class="nv">internal</span>.<span class="nv">py</span>


<span class="nv">def</span> <span class="nv">root</span><span class="ss">()</span>:
    <span class="k">return</span> <span class="s1">&#39;</span><span class="s">Welcome home!</span><span class="s1">&#39;</span>
</pre></div>


<p>External API:</p>
<div class="codehilite"><pre><span></span><span class="c1"># external.py</span>
<span class="kn">import</span> <span class="nn">hug</span>

<span class="kn">import</span> <span class="nn">internal</span>

<span class="n">router</span> <span class="o">=</span> <span class="n">hug</span><span class="o">.</span><span class="n">route</span><span class="o">.</span><span class="n">API</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;/home&#39;</span><span class="p">)(</span><span class="n">internal</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
</pre></div>


<p>Or, alternatively:</p>
<div class="codehilite"><pre><span></span><span class="c1"># external.py</span>
<span class="kn">import</span> <span class="nn">hug</span>

<span class="kn">import</span> <span class="nn">internal</span>

<span class="n">api</span> <span class="o">=</span> <span class="n">hug</span><span class="o">.</span><span class="n">API</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">hug</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;/home&#39;</span><span class="p">,</span> <span class="n">api</span><span class="o">=</span><span class="n">api</span><span class="p">)(</span><span class="n">internal</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
</pre></div>


<h1 id="chaining-routers-for-easy-re-use">Chaining routers for easy re-use</h1>
<p>A very common scenario when using hug routers, because they are so powerful, is duplication between routers.
For instance: if you decide you want every route to return the 404 page when a validation error occurs or you want to
require validation for a collection of routes. hug makes this extremely simple by allowing all routes to be chained
and reused:</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">hug</span>

<span class="n">api</span> <span class="o">=</span> <span class="n">hug</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">on_invalid</span><span class="o">=</span><span class="n">hug</span><span class="o">.</span><span class="n">redirect</span><span class="o">.</span><span class="n">not_found</span><span class="p">)</span>


<span class="nd">@api.urls</span><span class="p">(</span><span class="s1">&#39;/do-math&#39;</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="s1">&#39;number_1=1&amp;number_2=2&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">math</span><span class="p">(</span><span class="n">number_1</span><span class="p">:</span> <span class="n">hug</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">number</span><span class="p">,</span> <span class="n">number_2</span><span class="p">:</span> <span class="n">hug</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">number</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">number_1</span> <span class="o">+</span> <span class="n">number_2</span>


<span class="nd">@api</span>
<span class="k">def</span> <span class="nf">happy_birthday</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">:</span> <span class="n">hug</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">number</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Says happy birthday to a user&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="s2">&quot;Happy {age} Birthday {name}!&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="nb">locals</span><span class="p">())</span>
</pre></div>


<p>It's important to note that to chain you simply call the argument you would normally pass in to the routers init function
as a method on the existing router. Then you pass in any additional parameters you would like to override as **kwargs - as
shown in the math example above.</p>
<h1 id="common-router-parameters">Common router parameters</h1>
<p>There are a few parameters that are shared between all router types, as they are globally applicable to all currently supported interfaces:</p>
<ul>
<li><code>api</code>: The API to register the route with. You can always retrieve the API singleton for the current module by doing <code>hug.API(__name__)</code></li>
<li><code>transform</code>: A function to call on the the data returned by the function to transform it in some way specific to this interface</li>
<li><code>output</code>: An output format to apply to the outputted data (after return and optional transformation)</li>
<li><code>requires</code>: A list or single function that must all return <code>True</code> for the function to execute when called via this interface (commonly used for authentication)</li>
</ul>
<h1 id="http-routers">HTTP Routers</h1>
<p>in addition to <code>hug.http</code> hug includes convenience decorators for all common HTTP METHODS (<code>hug.connect</code>, <code>hug.delete</code>, <code>hug.get</code>, <code>hug.head</code>, <code>hug.options</code>, <code>hug.patch</code>, <code>hug.post</code>, <code>hug.put</code>, <code>hug.get_post</code>, <code>hug.put_post</code>, and <code>hug.trace</code>). These methods are functionally the same as calling <code>@hug.http(accept=(METHOD, ))</code> and are otherwise identical to the http router.</p>
<ul>
<li><code>urls</code>: A list of or a single URL that should be routed to the function. Supports defining variables within the URL that will automatically be passed to the function when <code>{}</code> notation is found in the URL: <code>/website/{page}</code>. Defaults to the name of the function being routed to.</li>
<li><code>accept</code>: A list of or a single HTTP METHOD value to accept. Defaults to all common HTTP methods.</li>
<li><code>examples</code>: A list of or a single example set of parameters in URL query param format. For example: <code>examples="argument_1=x&amp;argument_2=y"</code></li>
<li><code>versions</code>: A list of or a single integer version of the API this endpoint supports. To support a range of versions the Python builtin range function can be used.</li>
<li><code>suffixes</code>: A list of or a single suffix to add to the end of all URLs using this router.</li>
<li><code>prefixes</code>: A list of or a single prefix to add before all URLs using this router.</li>
<li><code>response_headers</code>: An optional dictionary of response headers to set automatically on every request to this endpoint.</li>
<li><code>status</code>: An optional status code to automatically apply to the response on every request to this endpoint.</li>
<li><code>parse_body</code>: If <code>True</code> and the format of the request body matches one known by hug, hug will run the specified input formatter on the request body before passing it as an argument to the routed function. Defaults to <code>True</code>.</li>
<li><code>on_invalid</code>: A transformation function to run outputed data through, only if the request fails validation. Defaults to the endpoints specified general transform function, can be set to not run at all by setting to <code>None</code>.</li>
<li><code>output_invalid</code>: Specifies an output format to attach to the endpoint only on the case that validation fails. Defaults to the endpoints specified output format.</li>
<li><code>raise_on_invalid</code>: If set to true, instead of collecting validation errors in a dictionary, hug will simply raise them as they occur.</li>
</ul>
<h1 id="handling-for-404-responses">Handling for 404 Responses</h1>
<p>By default, Hug will call <code>documentation_404()</code> if a user tries to access a nonexistant route when serving. If you want to specify something different, you can use the "sink" decorator, such as in the example below. The <code>@hug.sink()</code> decorator serves as a "catch all" for unassigned routes.</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">hug</span>

<span class="nd">@hug.sink</span><span class="p">(</span><span class="s1">&#39;/all&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">my_sink</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">request</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;/all&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
</pre></div>


<p>In this case, the server routes requests to anything that's no an assigned route to the landing page. To test the functionality of your sink decorator, serve your application locally, then attempt to access an unassigned route. Using this code, if you try to access <code>localhost:8000/this-route-is-invalid</code>, you will be rerouted to <code>localhost:8000</code>.</p>
<h1 id="cli-routing">CLI Routing</h1>
<p>Any endpoint can also be exposed to the command line as well, using <code>@hug.cli</code>:</p>
<ul>
<li><code>name</code>: The name that should execute the command from the command line. Defaults to the name of the function being routed.</li>
<li><code>version</code>: The optional version associated with this command line application.</li>
<li><code>doc</code>: Documentation to provide to users of this command line tool. Defaults to the functions doc string.</li>
</ul>
<h1 id="local-routing">Local Routing</h1>
<p>By default all hug APIs are already valid local APIs. However, sometimes it can be useful to apply type annotations and/or directives to local use as well. For these cases hug provides <code>@hug.local</code>:</p>
<ul>
<li><code>validate</code>: Apply type annotations to local use of the function. Defaults to <code>True</code>.</li>
<li><code>directives</code>: Apply directives to local use of the function. Defaults to <code>True</code>.</li>
<li><code>version</code>: Specify a version of the API for local use. If versions are being used, this generally should be the latest supported.</li>
<li><code>on_invalid</code>: A transformation function to run outputed data through, only if the request fails validation. Defaults to the endpoints specified general transform function, can be set to not run at all by setting to <code>None</code>.</li>
<li><code>output_invalid</code>: Specifies an output format to attach to the endpoint only on the case that validation fails. Defaults to the endpoints specified output format.</li>
<li><code>raise_on_invalid</code>: If set to <code>True</code>, instead of collecting validation errors in a dictionary, hug will simply raise them as they occur.</li>
</ul>
<p>NOTE: unlike all other routers, this modifies the function in-place</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../OUTPUT_FORMATS/" title="Output Formats" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Output Formats
              </span>
            </div>
          </a>
        
        
          <a href="../TYPE_ANNOTATIONS/" title="Type Annotations" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Type Annotations
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Powered by
        <a href="http://timothycrosley.github.io/portray">portray.</a>
        You too can
        <a href="http://timothycrosley.github.io/portray">
          portray</a>
        your Python project well using automatic documentation.
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.c648116f.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
    
  </body>
</html>