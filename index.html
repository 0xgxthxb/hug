



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.2">
    
    
      
        <title>hug</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/application.30686662.css">
      
        <link rel="stylesheet" href="assets/stylesheets/application-palette.a8b3c06d.css">
      
      
        
        
        <meta name="theme-color" content="#4caf50">
      
    
    
      <script src="assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="green" data-md-color-accent="lightgreen">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#supporting-hug-development" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="." title="hug" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              hug
            </span>
            <span class="md-header-nav__topic">
              
                Home
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/hugapi/hug/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    hugapi/hu
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="." title="hug" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    hug
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/hugapi/hug/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    hugapi/hu
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
    <a href="." title="Home" class="md-nav__link md-nav__link--active">
      Home
    </a>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="ACKNOWLEDGEMENTS/" title="Acknowledgements" class="md-nav__link">
      Acknowledgements
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="ARCHITECTURE/" title="Architecture" class="md-nav__link">
      Architecture
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="CHANGELOG/" title="Changelog" class="md-nav__link">
      Changelog
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="CODING_STANDARD/" title="Coding Standard" class="md-nav__link">
      Coding Standard
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="CONTRIBUTING/" title="Contributing" class="md-nav__link">
      Contributing
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="EXTENDING/" title="Extending" class="md-nav__link">
      Extending
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="FAQ/" title="Faq" class="md-nav__link">
      Faq
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="SECURITY/" title="Security" class="md-nav__link">
      Security
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="documentation/AUTHENTICATION/" title="Authentication" class="md-nav__link">
      Authentication
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="documentation/CUSTOM_CONTEXT/" title="Custom Context" class="md-nav__link">
      Custom Context
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="documentation/DIRECTIVES/" title="Directives" class="md-nav__link">
      Directives
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="documentation/OUTPUT_FORMATS/" title="Output Formats" class="md-nav__link">
      Output Formats
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="documentation/ROUTING/" title="Routing" class="md-nav__link">
      Routing
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="documentation/TYPE_ANNOTATIONS/" title="Type Annotations" class="md-nav__link">
      Type Annotations
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-16" type="checkbox" id="nav-16">
    
    <label class="md-nav__link" for="nav-16">
      Reference
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-16">
        Reference
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-16-1" type="checkbox" id="nav-16-1">
    
    <label class="md-nav__link" for="nav-16-1">
      Hug
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-16-1">
        Hug
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="reference/hug/api/" title="API" class="md-nav__link">
      API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="reference/hug/authentication/" title="Authentication" class="md-nav__link">
      Authentication
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="reference/hug/decorators/" title="Decorators" class="md-nav__link">
      Decorators
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="reference/hug/defaults/" title="Defaults" class="md-nav__link">
      Defaults
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="reference/hug/development_runner/" title="Development Runner" class="md-nav__link">
      Development Runner
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="reference/hug/directives/" title="Directives" class="md-nav__link">
      Directives
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="reference/hug/exceptions/" title="Exceptions" class="md-nav__link">
      Exceptions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="reference/hug/format/" title="Format" class="md-nav__link">
      Format
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="reference/hug/" title="Index" class="md-nav__link">
      Index
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="reference/hug/input_format/" title="Input Format" class="md-nav__link">
      Input Format
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="reference/hug/interface/" title="Interface" class="md-nav__link">
      Interface
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="reference/hug/introspect/" title="Introspect" class="md-nav__link">
      Introspect
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="reference/hug/json_module/" title="Json Module" class="md-nav__link">
      Json Module
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="reference/hug/middleware/" title="Middleware" class="md-nav__link">
      Middleware
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="reference/hug/output_format/" title="Output Format" class="md-nav__link">
      Output Format
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="reference/hug/redirect/" title="Redirect" class="md-nav__link">
      Redirect
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="reference/hug/route/" title="Route" class="md-nav__link">
      Route
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="reference/hug/routing/" title="Routing" class="md-nav__link">
      Routing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="reference/hug/store/" title="Store" class="md-nav__link">
      Store
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="reference/hug/test/" title="Test" class="md-nav__link">
      Test
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="reference/hug/this/" title="This" class="md-nav__link">
      This
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="reference/hug/transform/" title="Transform" class="md-nav__link">
      Transform
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="reference/hug/types/" title="Types" class="md-nav__link">
      Types
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="reference/hug/use/" title="Use" class="md-nav__link">
      Use
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="reference/hug/validate/" title="Validate" class="md-nav__link">
      Validate
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/hugapi/hug/edit/master/docs/README.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="_1"><a href="http://hug.rest"><img alt="HUG" src="https://raw.github.com/hugapi/hug/develop/artwork/logo.png" /></a></h1>
<p><a href="http://badge.fury.io/py/hug"><img alt="PyPI version" src="https://badge.fury.io/py/hug.svg" /></a>
<a href="https://travis-ci.org/hugapi/hug"><img alt="Build Status" src="https://travis-ci.org/hugapi/hug.svg?branch=develop" /></a>
<a href="https://ci.appveyor.com/project/TimothyCrosley/hug"><img alt="Windows Build Status" src="https://ci.appveyor.com/api/projects/status/0h7ynsqrbaxs7hfm/branch/master?svg=true" /></a>
<a href="https://coveralls.io/github/hugapi/hug?branch=master"><img alt="Coverage Status" src="https://coveralls.io/repos/hugapi/hug/badge.svg?branch=develop&amp;service=github" /></a>
<a href="https://pypi.python.org/pypi/hug/"><img alt="License" src="https://img.shields.io/github/license/mashape/apistatus.svg" /></a>
<a href="https://gitter.im/timothycrosley/hug?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge"><img alt="Join the chat at https://gitter.im/timothycrosley/hug" src="https://badges.gitter.im/Join%20Chat.svg" /></a></p>
<p>NOTE: For more in-depth documentation visit <a href="http://www.hug.rest">hug's website</a></p>
<p>hug aims to make developing Python driven APIs as simple as possible, but no simpler. As a result, it drastically simplifies Python API development.</p>
<p>hug's Design Objectives:</p>
<ul>
<li>Make developing a Python driven API as succinct as a written definition.</li>
<li>The framework should encourage code that self-documents.</li>
<li>It should be fast. A developer should never feel the need to look somewhere else for performance reasons.</li>
<li>Writing tests for APIs written on-top of hug should be easy and intuitive.</li>
<li>Magic done once, in an API framework, is better than pushing the problem set to the user of the API framework.</li>
<li>Be the basis for next generation Python APIs, embracing the latest technology.</li>
</ul>
<p>As a result of these goals, hug is Python 3+ only and built upon <a href="https://github.com/falconry/falcon">Falcon's</a> high performance HTTP library</p>
<p><a href="https://github.com/hugapi/hug/blob/develop/examples/hello_world.py"><img alt="HUG Hello World Example" src="https://raw.github.com/hugapi/hug/develop/artwork/example.gif" /></a></p>
<h1 id="supporting-hug-development">Supporting hug development</h1>
<p><a href="https://tidelift.com/subscription/pkg/pypi-hug?utm_source=pypi-hug&amp;utm_medium=referral&amp;utm_campaign=readme">Get professionally supported hug with the Tidelift Subscription</a></p>
<p>Professional support for hug is available as part of the <a href="https://tidelift.com/subscription/pkg/pypi-hug?utm_source=pypi-hug&amp;utm_medium=referral&amp;utm_campaign=readme">Tidelift
Subscription</a>.
Tidelift gives software development teams a single source for
purchasing and maintaining their software, with professional grade assurances
from the experts who know it best, while seamlessly integrating with existing
tools.</p>
<h1 id="installing-hug">Installing hug</h1>
<p>Installing hug is as simple as:</p>
<div class="codehilite"><pre><span></span>pip3 install hug --upgrade
</pre></div>


<p>Ideally, within a <a href="http://docs.python-guide.org/en/latest/dev/virtualenvs/">virtual environment</a>.</p>
<h1 id="getting-started">Getting Started</h1>
<p>Build an example API with a simple endpoint in just a few lines.</p>
<div class="codehilite"><pre><span></span><span class="c1"># filename: happy_birthday.py</span>
<span class="sd">&quot;&quot;&quot;A basic (single function) API written using hug&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">hug</span>


<span class="nd">@hug.get</span><span class="p">(</span><span class="s1">&#39;/happy_birthday&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">happy_birthday</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">:</span><span class="n">hug</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">number</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Says happy birthday to a user&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="s2">&quot;Happy {age} Birthday {name}!&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="nb">locals</span><span class="p">())</span>
</pre></div>


<p>To run, from the command line type:</p>
<div class="codehilite"><pre><span></span>hug -f happy_birthday.py
</pre></div>


<p>You can access the example in your browser at:
<code>localhost:8000/happy_birthday?name=hug&amp;age=1</code>. Then check out the
documentation for your API at <code>localhost:8000/documentation</code></p>
<p>Parameters can also be encoded in the URL (check
out <a href="examples/happy_birthday.py"><code>happy_birthday.py</code></a> for the whole
example).</p>
<div class="codehilite"><pre><span></span><span class="nd">@hug.get</span><span class="p">(</span><span class="s1">&#39;/greet/{event}&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">greet</span><span class="p">(</span><span class="n">event</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Greets appropriately (from http://blog.ketchum.com/how-to-write-10-common-holiday-greetings/)  &quot;&quot;&quot;</span>
    <span class="n">greetings</span> <span class="o">=</span> <span class="s2">&quot;Happy&quot;</span>
    <span class="k">if</span> <span class="n">event</span> <span class="o">==</span> <span class="s2">&quot;Christmas&quot;</span><span class="p">:</span>
        <span class="n">greetings</span> <span class="o">=</span> <span class="s2">&quot;Merry&quot;</span>
    <span class="k">if</span> <span class="n">event</span> <span class="o">==</span> <span class="s2">&quot;Kwanzaa&quot;</span><span class="p">:</span>
        <span class="n">greetings</span> <span class="o">=</span> <span class="s2">&quot;Joyous&quot;</span>
    <span class="k">if</span> <span class="n">event</span> <span class="o">==</span> <span class="s2">&quot;wishes&quot;</span><span class="p">:</span>
        <span class="n">greetings</span> <span class="o">=</span> <span class="s2">&quot;Warm&quot;</span>

    <span class="k">return</span> <span class="s2">&quot;{greetings} {event}!&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="nb">locals</span><span class="p">())</span>
</pre></div>


<p>Which, once you are running the server as above, you can use this way:</p>
<div class="codehilite"><pre><span></span><span class="n">curl</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">8000</span><span class="o">/</span><span class="n">greet</span><span class="o">/</span><span class="n">wishes</span>
<span class="ss">&quot;Warm wishes!&quot;</span>
</pre></div>


<h1 id="versioning-with-hug">Versioning with hug</h1>
<div class="codehilite"><pre><span></span><span class="c1"># filename: versioning_example.py</span>
<span class="sd">&quot;&quot;&quot;A simple example of a hug API call with versioning&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">hug</span>

<span class="nd">@hug.get</span><span class="p">(</span><span class="s1">&#39;/echo&#39;</span><span class="p">,</span> <span class="n">versions</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">echo</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">text</span>


<span class="nd">@hug.get</span><span class="p">(</span><span class="s1">&#39;/echo&#39;</span><span class="p">,</span> <span class="n">versions</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">echo</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
    <span class="k">return</span> <span class="s2">&quot;Echo: {text}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="nb">locals</span><span class="p">())</span>
</pre></div>


<p>To run the example:</p>
<div class="codehilite"><pre><span></span>hug -f versioning_example.py
</pre></div>


<p>Then you can access the example from <code>localhost:8000/v1/echo?text=Hi</code> / <code>localhost:8000/v2/echo?text=Hi</code> Or access the documentation for your API from <code>localhost:8000</code></p>
<p>Note: versioning in hug automatically supports both the version header as well as direct URL based specification.</p>
<h1 id="testing-hug-apis">Testing hug APIs</h1>
<p>hug's <code>http</code> method decorators don't modify your original functions. This makes testing hug APIs as simple as testing any other Python functions. Additionally, this means interacting with your API functions in other Python code is as straight forward as calling Python only API functions. hug makes it easy to test the full Python stack of your API by using the <code>hug.test</code> module:</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">hug</span>
<span class="kn">import</span> <span class="nn">happy_birthday</span>

<span class="n">hug</span><span class="o">.</span><span class="n">test</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">happy_birthday</span><span class="p">,</span> <span class="s1">&#39;happy_birthday&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Timothy&#39;</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">:</span> <span class="mi">25</span><span class="p">})</span> <span class="c1"># Returns a Response object</span>
</pre></div>


<p>You can use this <code>Response</code> object for test assertions (check
out <a href="examples/test_happy_birthday.py"><code>test_happy_birthday.py</code></a> ):</p>
<div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">tests_happy_birthday</span><span class="p">():</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">hug</span><span class="o">.</span><span class="n">test</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">happy_birthday</span><span class="p">,</span> <span class="s1">&#39;happy_birthday&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Timothy&#39;</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">:</span> <span class="mi">25</span><span class="p">})</span>
    <span class="k">assert</span> <span class="n">response</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="n">HTTP_200</span>
    <span class="k">assert</span> <span class="n">response</span><span class="o">.</span><span class="n">data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span>
</pre></div>


<h1 id="running-hug-with-other-wsgi-based-servers">Running hug with other WSGI based servers</h1>
<p>hug exposes a <code>__hug_wsgi__</code> magic method on every API module automatically. Running your hug based API on any standard wsgi server should be as simple as pointing it to <code>module_name</code>: <code>__hug_wsgi__</code>.</p>
<p>For Example:</p>
<div class="codehilite"><pre><span></span>uwsgi --http <span class="m">0</span>.0.0.0:8000 --wsgi-file examples/hello_world.py --callable __hug_wsgi__
</pre></div>


<p>To run the hello world hug example API.</p>
<h1 id="building-blocks-of-a-hug-api">Building Blocks of a hug API</h1>
<p>When building an API using the hug framework you'll use the following concepts:</p>
<p><strong>METHOD Decorators</strong> <code>get</code>, <code>post</code>, <code>update</code>, etc HTTP method decorators that expose your Python function as an API while keeping your Python method unchanged</p>
<div class="codehilite"><pre><span></span><span class="nd">@hug.get</span><span class="p">()</span> <span class="c1"># &lt;- Is the hug METHOD decorator</span>
<span class="k">def</span> <span class="nf">hello_world</span><span class="p">():</span>
    <span class="k">return</span> <span class="s2">&quot;Hello&quot;</span>
</pre></div>


<p>hug uses the structure of the function you decorate to automatically generate documentation for users of your API. hug always passes a request, response, and api_version variable to your function if they are defined params in your function definition.</p>
<p><strong>Type Annotations</strong> functions that optionally are attached to your methods arguments to specify how the argument is validated and converted into a Python type</p>
<div class="codehilite"><pre><span></span><span class="nd">@hug.get</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">math</span><span class="p">(</span><span class="n">number_1</span><span class="p">:</span><span class="nb">int</span><span class="p">,</span> <span class="n">number_2</span><span class="p">:</span><span class="nb">int</span><span class="p">):</span> <span class="c1">#The :int after both arguments is the Type Annotation</span>
    <span class="k">return</span> <span class="n">number_1</span> <span class="o">+</span> <span class="n">number_2</span>
</pre></div>


<p>Type annotations also feed into <code>hug</code>'s automatic documentation
generation to let users of your API know what data to supply.</p>
<p><strong>Directives</strong> functions that get executed with the request / response data based on being requested as an argument in your api_function.
These apply as input parameters only, and can not be applied currently as output formats or transformations.</p>
<div class="codehilite"><pre><span></span><span class="nd">@hug.get</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">test_time</span><span class="p">(</span><span class="n">hug_timer</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;time_taken&#39;</span><span class="p">:</span> <span class="nb">float</span><span class="p">(</span><span class="n">hug_timer</span><span class="p">)}</span>
</pre></div>


<p>Directives may be accessed via an argument with a <code>hug_</code> prefix, or by using Python 3 type annotations. The latter is the more modern approach, and is recommended. Directives declared in a module can be accessed by using their fully qualified name as the type annotation (ex: <code>module.directive_name</code>).</p>
<p>Aside from the obvious input transformation use case, directives can be used to pipe data into your API functions, even if they are not present in the request query string, POST body, etc. For an example of how to use directives in this way, see the authentication example in the examples folder.</p>
<p>Adding your own directives is straight forward:</p>
<div class="codehilite"><pre><span></span><span class="nd">@hug.directive</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">square</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Returns passed in parameter multiplied by itself&#39;&#39;&#39;</span>
    <span class="k">return</span> <span class="n">value</span> <span class="o">*</span> <span class="n">value</span>

<span class="nd">@hug.get</span><span class="p">()</span>
<span class="nd">@hug.local</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">tester</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="n">square</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">value</span>

<span class="n">tester</span><span class="p">()</span> <span class="o">==</span> <span class="mi">100</span>
</pre></div>


<p>For completeness, here is an example of accessing the directive via the magic name approach:</p>
<div class="codehilite"><pre><span></span><span class="nd">@hug.directive</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">multiply</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Returns passed in parameter multiplied by itself&#39;&#39;&#39;</span>
    <span class="k">return</span> <span class="n">value</span> <span class="o">*</span> <span class="n">value</span>

<span class="nd">@hug.get</span><span class="p">()</span>
<span class="nd">@hug.local</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">tester</span><span class="p">(</span><span class="n">hug_multiply</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">hug_multiply</span>

<span class="n">tester</span><span class="p">()</span> <span class="o">==</span> <span class="mi">100</span>
</pre></div>


<p><strong>Output Formatters</strong> a function that takes the output of your API function and formats it for transport to the user of the API.</p>
<div class="codehilite"><pre><span></span><span class="nd">@hug.default_output_format</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">my_output_formatter</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
    <span class="k">return</span> <span class="s2">&quot;STRING:{0}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

<span class="nd">@hug.get</span><span class="p">(</span><span class="n">output</span><span class="o">=</span><span class="n">hug</span><span class="o">.</span><span class="n">output_format</span><span class="o">.</span><span class="n">json</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">hello</span><span class="p">():</span>
    <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;hello&#39;</span><span class="p">:</span> <span class="s1">&#39;world&#39;</span><span class="p">}</span>
</pre></div>


<p>as shown, you can easily change the output format for both an entire API as well as an individual API call</p>
<p><strong>Input Formatters</strong> a function that takes the body of data given from a user of your API and formats it for handling.</p>
<div class="codehilite"><pre><span></span><span class="nd">@hug.default_input_format</span><span class="p">(</span><span class="s2">&quot;application/json&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">my_input_formatter</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">(</span><span class="s1">&#39;Results&#39;</span><span class="p">,</span> <span class="n">hug</span><span class="o">.</span><span class="n">input_format</span><span class="o">.</span><span class="n">json</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
</pre></div>


<p>Input formatters are mapped based on the <code>content_type</code> of the request data, and only perform basic parsing. More detailed parsing should be done by the Type Annotations present on your <code>api_function</code></p>
<p><strong>Middleware</strong> functions that get called for every request a hug API processes</p>
<div class="codehilite"><pre><span></span><span class="nd">@hug.request_middleware</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">process_data</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="p">):</span>
    <span class="n">request</span><span class="o">.</span><span class="n">env</span><span class="p">[</span><span class="s1">&#39;SERVER_NAME&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;changed&#39;</span>

<span class="nd">@hug.response_middleware</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">process_data</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="p">,</span> <span class="n">resource</span><span class="p">):</span>
    <span class="n">response</span><span class="o">.</span><span class="n">set_header</span><span class="p">(</span><span class="s1">&#39;MyHeader&#39;</span><span class="p">,</span> <span class="s1">&#39;Value&#39;</span><span class="p">)</span>
</pre></div>


<p>You can also easily add any Falcon style middleware using:</p>
<div class="codehilite"><pre><span></span><span class="n">__hug__</span><span class="o">.</span><span class="n">http</span><span class="o">.</span><span class="n">add_middleware</span><span class="p">(</span><span class="n">MiddlewareObject</span><span class="p">())</span>
</pre></div>


<p><strong>Parameter mapping</strong> can be used to override inferred parameter names, eg. for reserved keywords:</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">marshmallow.fields</span> <span class="kn">as</span> <span class="nn">fields</span>
<span class="o">...</span>

<span class="nd">@hug.get</span><span class="p">(</span><span class="s1">&#39;/foo&#39;</span><span class="p">,</span> <span class="n">map_params</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;from_date&#39;</span><span class="p">})</span>  <span class="c1"># API call uses &#39;from&#39;</span>
<span class="k">def</span> <span class="nf">get_foo_by_date</span><span class="p">(</span><span class="n">from_date</span><span class="p">:</span> <span class="n">fields</span><span class="o">.</span><span class="n">DateTime</span><span class="p">()):</span>
    <span class="k">return</span> <span class="n">find_foo</span><span class="p">(</span><span class="n">from_date</span><span class="p">)</span>
</pre></div>


<p>Input formatters are mapped based on the <code>content_type</code> of the request data, and only perform basic parsing. More detailed parsing should be done by the Type Annotations present on your <code>api_function</code></p>
<h1 id="splitting-apis-over-multiple-files">Splitting APIs over multiple files</h1>
<p>hug enables you to organize large projects in any manner you see fit. You can import any module that contains hug decorated functions (request handling, directives, type handlers, etc) and extend your base API with that module.</p>
<p>For example:</p>
<p><code>something.py</code></p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">hug</span>

<span class="nd">@hug.get</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">say_hi</span><span class="p">():</span>
    <span class="k">return</span> <span class="s1">&#39;hello from something&#39;</span>
</pre></div>


<p>Can be imported into the main API file:</p>
<p><code>__init__.py</code></p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">hug</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">something</span>

<span class="nd">@hug.get</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">say_hi</span><span class="p">():</span>
    <span class="k">return</span> <span class="s2">&quot;Hi from root&quot;</span>

<span class="nd">@hug.extend_api</span><span class="p">(</span><span class="s1">&#39;/something&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">something_api</span><span class="p">():</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">something</span><span class="p">]</span>
</pre></div>


<p>Or alternatively - for cases like this - where only one module is being included per a URL route:</p>
<div class="codehilite"><pre><span></span><span class="c1">#alternatively</span>
<span class="n">hug</span><span class="o">.</span><span class="n">API</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">something</span><span class="p">,</span> <span class="s1">&#39;/something&#39;</span><span class="p">)</span>
</pre></div>


<h1 id="configuring-hug-404">Configuring hug 404</h1>
<p>By default, hug returns an auto generated API spec when a user tries to access an endpoint that isn't defined. If you would not like to return this spec you can turn off 404 documentation:</p>
<p>From the command line application:</p>
<div class="codehilite"><pre><span></span>hug -nd -f <span class="o">{</span>file<span class="o">}</span> <span class="c1">#nd flag tells hug not to generate documentation on 404</span>
</pre></div>


<p>Additionally, you can easily create a custom 404 handler using the <code>hug.not_found</code> decorator:</p>
<div class="codehilite"><pre><span></span><span class="nd">@hug.not_found</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">not_found_handler</span><span class="p">():</span>
    <span class="k">return</span> <span class="s2">&quot;Not Found&quot;</span>
</pre></div>


<p>This decorator works in the same manner as the hug HTTP method decorators, and is even version aware:</p>
<div class="codehilite"><pre><span></span><span class="nd">@hug.not_found</span><span class="p">(</span><span class="n">versions</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">not_found_handler</span><span class="p">():</span>
    <span class="k">return</span> <span class="s2">&quot;&quot;</span>

<span class="nd">@hug.not_found</span><span class="p">(</span><span class="n">versions</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">not_found_handler</span><span class="p">():</span>
    <span class="k">return</span> <span class="s2">&quot;Not Found&quot;</span>
</pre></div>


<h1 id="asyncio-support">Asyncio support</h1>
<p>When using the <code>get</code> and <code>cli</code> method decorator on coroutines, hug will schedule
the execution of the coroutine.</p>
<p>Using asyncio coroutine decorator</p>
<div class="codehilite"><pre><span></span><span class="nd">@hug.get</span><span class="p">()</span>
<span class="nd">@asyncio.coroutine</span>
<span class="k">def</span> <span class="nf">hello_world</span><span class="p">():</span>
    <span class="k">return</span> <span class="s2">&quot;Hello&quot;</span>
</pre></div>


<p>Using Python 3.5 async keyword.</p>
<div class="codehilite"><pre><span></span><span class="nd">@hug.get</span><span class="p">()</span>
<span class="n">async</span> <span class="k">def</span> <span class="nf">hello_world</span><span class="p">():</span>
    <span class="k">return</span> <span class="s2">&quot;Hello&quot;</span>
</pre></div>


<p>NOTE: Hug is running on top Falcon which is not an asynchronous server. Even if using
asyncio, requests will still be processed synchronously.</p>
<h1 id="using-docker">Using Docker</h1>
<p>If you like to develop in Docker and keep your system clean, you can do that but you'll need to first install <a href="https://docs.docker.com/compose/install/">Docker Compose</a>.</p>
<p>Once you've done that, you'll need to <code>cd</code> into the <code>docker</code> directory and run the web server (Gunicorn) specified in <code>./docker/gunicorn/Dockerfile</code>, after which you can preview the output of your API in the browser on your host machine.</p>
<div class="codehilite"><pre><span></span>$ <span class="nb">cd</span> ./docker
<span class="c1"># This will run Gunicorn on port 8000 of the Docker container.</span>
$ docker-compose up gunicorn

<span class="c1"># From the host machine, find your Dockers IP address.</span>
<span class="c1"># For Windows &amp; Mac:</span>
$ docker-machine ip default

<span class="c1"># For Linux:</span>
$ ifconfig docker0 <span class="p">|</span> grep <span class="s1">&#39;inet&#39;</span> <span class="p">|</span> cut -d: -f2 <span class="p">|</span> awk <span class="s1">&#39;{ print $1}&#39;</span> <span class="p">|</span> head -n1
</pre></div>


<p>By default, the IP is 172.17.0.1. Assuming that's the IP you see, as well, you would then go to <code>http://172.17.0.1:8000/</code> in your browser to view your API.</p>
<p>You can also log into a Docker container that you can consider your work space. This workspace has Python and Pip installed so you can use those tools within Docker. If you need to test the CLI interface, for example, you would use this.</p>
<div class="codehilite"><pre><span></span>$ docker-compose run workspace bash
</pre></div>


<p>On your Docker <code>workspace</code> container, the <code>./docker/templates</code> directory on your host computer is mounted to <code>/src</code> in the Docker container. This is specified under <code>services</code> &gt; <code>app</code> of <code>./docker/docker-compose.yml</code>.</p>
<div class="codehilite"><pre><span></span>bash-4.3# <span class="nb">cd</span> /src
bash-4.3# tree
.
├── __init__.py
└── handlers
    ├── birthday.py
    └── hello.py

<span class="m">1</span> directory, <span class="m">3</span> files
</pre></div>


<h1 id="security-contact-information">Security contact information</h1>
<p>hug takes security and quality seriously. This focus is why we depend only on thoroughly tested components and utilize static analysis tools (such as bandit and safety) to verify the security of our code base.
If you find or encounter any potential security issues, please let us know right away so we can resolve them.</p>
<p>To report a security vulnerability, please use the
<a href="https://tidelift.com/security">Tidelift security contact</a>.
Tidelift will coordinate the fix and disclosure.</p>
<h1 id="why-hug">Why hug?</h1>
<p>HUG simply stands for Hopefully Useful Guide. This represents the project's goal to help guide developers into creating well written and intuitive APIs.</p>
<hr />
<p>Thanks and I hope you find <em>this</em> hug helpful as you develop your next Python API!</p>
<p>~Timothy Crosley</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
        
          <a href="ACKNOWLEDGEMENTS/" title="Acknowledgements" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Acknowledgements
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Powered by
        <a href="http://timothycrosley.github.io/portray">portray.</a>
        You too can
        <a href="http://timothycrosley.github.io/portray">
          portray</a>
        your Python project well using automatic documentation.
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="assets/javascripts/application.c648116f.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"."}})</script>
      
    
  </body>
</html>